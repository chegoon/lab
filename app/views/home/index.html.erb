<%- model_class = Channel -%> 
<h1>Dashboard</h1>
    <div class="row">
    <% @channels.each_with_index do |channel, i| %>
    <% delta = channel.channel_statistics.offset(1).last %>

	<div class="col-sm-6 col-md-4">
	    <div class="thumbnail">
	    	<a href="<%= channel_path(channel) %>"><%= image_tag(channel.thumbnail_url) %></a>
	      <div class="caption">
	        <h3><a href="<%= channel_path(channel) %>"><%= channel.title %><a/></h3>
	        <p>
	        	<%= "Video : " %><%= number_with_delimiter(channel.video_count) if channel.video_count %><%= num_diff(channel.video_count, delta.video_count) if delta %><br/>
	        	<%= "Subscriber : "%> <%= number_with_delimiter(channel.subscriber_count) if channel.subscriber_count %><%= num_diff(channel.subscriber_count, delta.subscriber_count) if delta %><br/>
	        	<%= "Views : " %><%= number_with_delimiter(channel.view_count) if channel.view_count %><%= num_diff(channel.view_count, delta.view_count) if delta %>
			</p>
			<h5>Latest Video</h5>
	        <div class="media">
          		<div class="media-left pull-left">
		          	<a href="<%= video_path(channel.videos.last) %>">
		              <%= image_tag(channel.videos.last.thumbnail_url, :style=>"height:60px; width:auto; ") %>
		            </a>
		        </div>
		        <div class="media-body">
		            <h5 class="media-heading"><a href="<%= video_path(channel.videos.last) %>"><%= channel.videos.last.title %></a></h5>
		            <!--<div class="pull-right"><%= "Uploaded at #{channel.videos.last.published_at.getlocal.strftime("%F %R")}" if channel.videos.last.published_at %></div>-->
		        </div>
		    </div>
	      </div>
	    </div>
	  </div>
    <% end %>

	</div>
<div class="container text-center">
  <%= will_paginate @channels, renderer: BootstrapPagination::Rails %>
</div>
