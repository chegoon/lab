<%- model_class = Video -%> 
<p class="pull-right">At <%= Time.now.getlocal.strftime("%F %R") %>, refresh every 12hrs</p>
<div class="page-header">
  <h1>Videos Dashboard <small><%= number_with_delimiter(@videos.count) %> videos</small></h1>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>No.</th>
      <th>Creator</th>
      <th>Video</th>
      <!--
      <th style="text-align:right; padding-right:10px; "><%= link_to "Views", videos_path, :sort => "view_count" %></th>
      <th style="text-align:right; padding-right:10px; "><%= link_to "Likes", :sort => "like_count" %></th>
      <th style="text-align:right; padding-right:10px; "><%=  link_to "Comments", :sort => "comment_count" %></th>
      -->
      <th style="text-align:right; padding-right:10px; "><%= sortable "published_at", "Uploaded" %></th>
      <th style="text-align:right; padding-right:10px; "><%= sortable "view_count", "Views" %></th>
      <th style="text-align:right; padding-right:10px; "><%= sortable "like_count", "Likes" %></th>
      <th style="text-align:right; padding-right:10px; "><%= sortable "comment_count", "Comments" %></th>
      <!-- <th><%=t '.actions', :default => t("helpers.actions") %></th> -->
    </tr>
  </thead>
  <tbody>
    <% @videos.each_with_index do |v, i| %>
    <% delta = v.video_statistics.offset(1).last %>
    <tr  onClick=document.location=<%= "'#{video_path(v)}'" %>; style="cursor: pointer;">
      <td><%= (@videos.current_page - 1) * @videos.per_page + i + 1 %></td>
      <td><%= image_tag(v.channel.thumbnail_url, :class => "media-object", :style => "width:64px; height: 64px;") %></td>
      <td >
        <div class="media">
          <div class="media-left pull-left">
            <a href="<%= video_path(v) %>">
              <%= image_tag(v.thumbnail_url, :class => "media-object") %>
            </a>
          </div>
          <div class="media-body">
            <h4 class="media-heading"><%= v.title %></h4>
            <p><%= v.description %></p>
            <!--<div class="pull-right"><%= "Uploaded at #{v.published_at.getlocal.strftime("%F %R")}" if v.published_at %></div>-->
          </div>
        </div>
      </td>
      <td style="text-align:right; padding-right:10px; "><%= v.published_at.getlocal.strftime("%F %R") %></td>
      <td style="text-align:right; padding-right:10px; "><%= number_with_delimiter(v.view_count) %></td>
      <td style="text-align:right; padding-right:10px; "><%= number_with_delimiter(v.like_count) %></td>
      <td style="text-align:right; padding-right:10px; "><%= number_with_delimiter(v.comment_count) %></td>
    </tr>
    <% end %>
  </tbody>
</table>
<div class="container text-center">
  <%= will_paginate @videos, renderer: BootstrapPagination::Rails %>
</div>